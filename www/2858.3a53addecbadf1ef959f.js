(self.webpackChunkveciRed=self.webpackChunkveciRed||[]).push([[2858],{5369:(i,o,e)=>{"use strict";e.d(o,{r:()=>c});var n=e(8583),t=e(7823),s=e(5503),r=e(665),a=e(639);let c=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[n.ez,t.Pc,s.D,r.u5]]}),i})()},2858:(i,o,e)=>{"use strict";e.r(o),e.d(o,{Tab1PageModule:()=>x});var n=e(7823),t=e(8583),s=e(665),r=e(581),a=e(7860),c=e(4762),u=e(639),l=e(5348),d=e(4975),g=e(8320);function v(i,o){if(1&i&&(u._UZ(0,"img",10),u.ALo(1,"mostrarImagen")),2&i){const i=u.oxw();u.s9C("src",u.xi3(1,1,i.aviso.imagenAviso,i.aviso.usuario._id),u.LSH)}}const h=function(i,o,e,n){return{redEvent:i,yellowEvent:o,greenEvent:e,blueEvent:n}};let m=(()=>{class i{constructor(){this.aviso={titulo:"",descripcion:"",imagenAviso:[],fechaCreacion:"",usuario:{},comunidad:{}}}ngOnInit(){}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-aviso-publicado"]],inputs:{aviso:"aviso"},decls:19,vars:12,consts:[[1,"avisoUnitario",3,"ngClass"],[1,"fontColor","ion-text-center"],["name","body"],[1,"ion-text-center"],["name","document-text-outline"],["class","formatoImagen",3,"src",4,"ngIf"],[2,"margin-top","-0.5%"],["name","calendar-sharp"],[2,"margin-top","-1%"],["name","person"],[1,"formatoImagen",3,"src"]],template:function(i,o){1&i&&(u.TgZ(0,"ion-card",0),u.TgZ(1,"ion-card-header"),u.TgZ(2,"ion-card-subtitle",1),u._UZ(3,"ion-icon",2),u._uU(4),u.qZA(),u.TgZ(5,"ion-card-title",3),u.TgZ(6,"b"),u._uU(7),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"ion-card-content",1),u._UZ(9,"ion-icon",4),u._uU(10),u.YNc(11,v,2,4,"img",5),u.TgZ(12,"ion-row",3),u.TgZ(13,"ion-col",6),u._UZ(14,"ion-icon",7),u._uU(15),u.qZA(),u.TgZ(16,"ion-col",8),u._uU(17),u._UZ(18,"ion-icon",9),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&i&&(u.Q6J("ngClass",u.l5B(7,h,1===o.aviso.tipoAviso,5===o.aviso.tipoAviso,4===o.aviso.tipoAviso,3===o.aviso.tipoAviso)),u.xp6(4),u.hij(" ",o.aviso.comunidad.nombreComunidad,""),u.xp6(3),u.Oqu(o.aviso.titulo),u.xp6(3),u.hij(" ",o.aviso.descripcion," "),u.xp6(1),u.Q6J("ngIf",o.aviso.imagenAviso.length>0),u.xp6(4),u.hij(" ",o.aviso.fechaCreacion," "),u.xp6(2),u.hij(" ",o.aviso.usuario.nombre," "))},directives:[n.PM,t.mk,n.Zi,n.tO,n.gu,n.gZ,n.FN,t.O5,n.Nd,n.wI],pipes:[g.P],styles:[".avisoUnitario[_ngcontent-%COMP%]{box-shadow:0 0 2em rgba(30,30,31,.932)}.tituloAviso[_ngcontent-%COMP%]{color:#000;text-align:center}.formatoImagen[_ngcontent-%COMP%]{width:100%;height:250px;object-fit:cover;border:2px solid #241816}.avisosDescripcion[_ngcontent-%COMP%]{font-size:small;color:#000;text-align:justify;text-justify:inter-word;width:90%;margin-left:4%}.redEvent[_ngcontent-%COMP%]{background-color:#f014144d}.greenEvent[_ngcontent-%COMP%]{background-color:#5bf00440}.yellowEvent[_ngcontent-%COMP%]{background-color:#e6f51b40}.blueEvent[_ngcontent-%COMP%]{background-color:#2c75d440}.fontColor[_ngcontent-%COMP%]{color:#000}"]}),i})();function f(i,o){if(1&i&&(u.TgZ(0,"ion-col",1),u._UZ(1,"app-aviso-publicado",2),u.qZA()),2&i){const i=o.$implicit;u.xp6(1),u.Q6J("aviso",i)}}let p=(()=>{class i{constructor(){this.avisos=[]}ngOnInit(){}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-avisos"]],inputs:{avisos:"avisos"},decls:2,vars:1,consts:[["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12",4,"ngFor","ngForOf"],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12"],[3,"aviso"]],template:function(i,o){1&i&&(u.TgZ(0,"ion-row"),u.YNc(1,f,2,1,"ion-col",0),u.qZA()),2&i&&(u.xp6(1),u.Q6J("ngForOf",o.avisos))},directives:[n.Nd,t.sg,n.wI,m],styles:[""]}),i})();const Z=["sectionSelect"];function b(i,o){if(1&i&&(u.TgZ(0,"ion-select-option",21),u._uU(1),u.qZA()),2&i){const i=o.$implicit;u.Q6J("value",i._id),u.xp6(1),u.hij(" ",i.nombreComunidad," ")}}function A(i,o){1&i&&(u.TgZ(0,"ion-card",22),u.TgZ(1,"h3",23),u.TgZ(2,"b"),u._uU(3,"A\xfan no hay avisos en tu comunidad"),u.qZA(),u.qZA(),u._UZ(4,"img",24),u.TgZ(5,"h3",23),u.TgZ(6,"b"),u._uU(7,"\xa1Crea el primero!"),u.qZA(),u.qZA(),u.qZA())}const C=[{path:"",component:(()=>{class i{constructor(i,o,e,n){this.AvisosService=i,this.menuCtrl=o,this.ruta=e,this.usuarioService=n,this.avisos=[],this.emptyAvisos=!1,this.infiniteScroll=!0,this.Comunidad=[],this.Idcomunidad="",this.contaRol=0,this.Idusuario="",this.disabledCrear=!0,this.Roltype=[],this.usuario={},this.menuCtrl.enable(!0,"first")}ngOnInit(){this.AvisosService.nuevoAviso.subscribe(i=>{this.emptyAvisos=!1,this.refresher()})}paginaSiguiente(i,o=!1){this.AvisosService.obtenerAvisos(o).subscribe(e=>{o&&(this.avisos=[],this.infiniteScroll=!0),this.avisos.push(...e.avisosPublicados),0==e.avisosPublicados.length&&1===e.pagina&&(this.emptyAvisos=!0),i&&(i.target.complete(),0==e.avisosPublicados.length&&(this.infiniteScroll=!1))}),this.validarCrearAviso()}NavegarCrearAviso(){this.ruta.navigateByUrl("main/tabs/crear-aviso")}refresher(i){this.emptyAvisos=!1,this.paginaSiguiente(i,!0)}actualizarToken(){return(0,c.mG)(this,void 0,void 0,function*(){let i=0;this.Comunidad.forEach(o=>{o._id==this.Idcomunidad?this.contaRol=i:i++});let o={usuario:this.Idusuario,posicion:this.contaRol};(yield this.usuarioService.actualizarToken(o))&&(this.emptyAvisos=!1,this.Idusuario="",this.contaRol=null,this.refresher())})}mostrarSelect(){return(0,c.mG)(this,void 0,void 0,function*(){yield this.obtenerComunidades(),this.selectRef.open()})}obtenerComunidades(){this.Comunidad=[],this.usuario={},this.usuarioService.obtenerComunidadUsuario().subscribe(i=>{this.Idusuario=i.comunidades._id,this.Comunidad.push(...i.comunidades.comunidad),this.usuario=this.usuarioService.obtenerUsuario(),this.disabledCrear="64a0d54909003038cecc7443"==String(this.usuario.comunidad)&&2==i.comunidades.rol[0]})}ionViewWillEnter(){this.refresher(),this.emptyAvisos=!1,this.obtenerComunidades()}validarCrearAviso(){this.usuario=this.usuarioService.obtenerUsuario(),this.usuarioService.obtenerRolBD().subscribe(i=>{this.disabledCrear="61ac3ce9c27143f6fe782cf0"==String(this.usuario.comunidad)&&2==i.currentRol})}}return i.\u0275fac=function(o){return new(o||i)(u.Y36(l.U),u.Y36(n._q),u.Y36(a.F0),u.Y36(d.i))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-tab1"]],viewQuery:function(i,o){if(1&i&&u.Gf(Z,5),2&i){let i;u.iGM(i=u.CRH())&&(o.selectRef=i.first)}},decls:30,vars:8,consts:[[3,"translucent"],[1,"cabecera"],["slot","start"],["menu","first","color","light"],["color","light",1,"vecired"],["size","large","fill","clear","slot","end"],["color","light",3,"disabled","click"],["slot","icon-only","name","add-outline"],[1,"avisosContenedor",3,"fullscreen"],[2,"display","none !important",3,"ngModel","ngModelChange","ionChange"],["sectionSelect",""],[3,"value",4,"ngFor","ngForOf"],[1,"ripple-parent"],[1,"avisosTitlte","ion-text-center"],[1,"cambiarComunidad",3,"click"],["slot","icon-only","name","people"],["slot","fixed",3,"ionRefresh"],["class","noAvisos",4,"ngIf"],[3,"avisos"],["threshold","100px",3,"disabled","ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],[3,"value"],[1,"noAvisos"],[1,"noAvisosTitle"],["src","/../../assets/sadHouse.png",1,"noAvisosImage"]],template:function(i,o){1&i&&(u.TgZ(0,"ion-header",0),u.TgZ(1,"ion-toolbar",1),u.TgZ(2,"ion-buttons",2),u._UZ(3,"ion-menu-button",3),u.qZA(),u.TgZ(4,"ion-title",4),u._uU(5," VeciRed "),u.qZA(),u.TgZ(6,"ion-buttons",5),u.TgZ(7,"ion-button",6),u.NdJ("click",function(){return o.NavegarCrearAviso()}),u._UZ(8,"ion-icon",7),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"ion-content",8),u.TgZ(10,"ion-select",9,10),u.NdJ("ngModelChange",function(i){return o.Idcomunidad=i})("ionChange",function(){return o.actualizarToken()}),u.YNc(12,b,2,2,"ion-select-option",11),u.qZA(),u.TgZ(13,"ion-grid"),u.TgZ(14,"div",12),u.TgZ(15,"ion-row"),u._UZ(16,"ion-col"),u.TgZ(17,"ion-col",13),u.TgZ(18,"b"),u._uU(19,"AVISOS"),u.qZA(),u.qZA(),u.TgZ(20,"ion-col"),u.TgZ(21,"ion-buttons",14),u.NdJ("click",function(){return o.mostrarSelect()}),u._UZ(22,"ion-icon",15),u.qZA(),u.qZA(),u.qZA(),u._UZ(23,"ion-ripple-effect"),u.qZA(),u.qZA(),u.TgZ(24,"ion-refresher",16),u.NdJ("ionRefresh",function(i){return o.refresher(i)}),u._UZ(25,"ion-refresher-content"),u.qZA(),u.YNc(26,A,8,0,"ion-card",17),u._UZ(27,"app-avisos",18),u.TgZ(28,"ion-infinite-scroll",19),u.NdJ("ionInfinite",function(i){return o.paginaSiguiente(i)}),u._UZ(29,"ion-infinite-scroll-content",20),u.qZA(),u.qZA()),2&i&&(u.Q6J("translucent",!0),u.xp6(7),u.Q6J("disabled",o.disabledCrear),u.xp6(2),u.Q6J("fullscreen",!0),u.xp6(1),u.Q6J("ngModel",o.Idcomunidad),u.xp6(2),u.Q6J("ngForOf",o.Comunidad),u.xp6(14),u.Q6J("ngIf",o.emptyAvisos),u.xp6(1),u.Q6J("avisos",o.avisos),u.xp6(1),u.Q6J("disabled",!o.infiniteScroll))},directives:[n.Gu,n.sr,n.Sm,n.fG,n.wd,n.YG,n.gu,n.W2,n.t9,n.QI,s.JJ,s.On,t.sg,n.jY,n.Nd,n.wI,n.H$,n.nJ,n.Wo,t.O5,p,n.ju,n.MB,n.n0,n.PM],styles:[".avisosTitlte[_ngcontent-%COMP%]{margin-top:-1vw;font-family:monospace;font-size:medium;font-size:x-large}.noAvisos[_ngcontent-%COMP%]{border:2px solid #241816;border-bottom-left-radius:9%;border-bottom-right-radius:9%;border-top-left-radius:9%;border-top-right-radius:9%;box-shadow:0 0 2em rgba(30,30,31,.932);background-color:#afeeee}.noAvisosTitle[_ngcontent-%COMP%]{color:#000;font-family:Perpetua;text-align:center;font-family:monospace}.noAvisosImage[_ngcontent-%COMP%]{margin-left:30%;width:40%;height:50%;max-height:70%}.cambiarComunidad[_ngcontent-%COMP%]{float:right}.cabecera[_ngcontent-%COMP%]{--background:linear-gradient(135deg,#110a3b,#2f32a0);color:light}.vecired[_ngcontent-%COMP%]{color:#f0f8ff;font-weight:bolder;font-size:x-large;text-align:center}"]}),i})()}];let _=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[a.Bz.forChild(C)],a.Bz]}),i})();var T=e(5369);let x=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[n.Pc,t.ez,s.u5,r.e,_,T.r]]}),i})()},5503:(i,o,e)=>{"use strict";e.d(o,{D:()=>t});var n=e(639);let t=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({}),i})()}}]);