(self.webpackChunkveciRed=self.webpackChunkveciRed||[]).push([[7208],{7208:(o,i,n)=>{"use strict";n.r(i),n.d(i,{ComunidadPageModule:()=>h});var e=n(8583),t=n(665),a=n(7823),r=n(7860),s=n(4762),c=n(639),d=n(4975),u=n(4212),l=n(2478);function m(o,i){if(1&o){const o=c.EpF();c.TgZ(0,"ion-col",11),c.TgZ(1,"ion-card",12),c.TgZ(2,"ion-card-header",13),c.TgZ(3,"ion-card-title"),c._UZ(4,"ion-icon",14),c.TgZ(5,"b"),c._uU(6),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"ion-card-content",13),c._UZ(8,"ion-icon",15),c._uU(9),c.TgZ(10,"ion-row"),c.TgZ(11,"ion-col"),c._UZ(12,"ion-icon",16),c.TgZ(13,"b"),c._uU(14),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"ion-row"),c.TgZ(16,"ion-col"),c._uU(17),c.qZA(),c.qZA(),c.TgZ(18,"ion-row"),c.TgZ(19,"ion-col",17),c.TgZ(20,"ion-buttons"),c.TgZ(21,"ion-button",18),c.NdJ("click",function(){const i=c.CHM(o),n=i.$implicit,e=i.index;return c.oxw().editarComunidad(n,e)}),c._UZ(22,"ion-icon",19),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"ion-col"),c.TgZ(24,"ion-buttons"),c.TgZ(25,"ion-button",20),c.NdJ("click",function(){const i=c.CHM(o),n=i.$implicit,e=i.index;return c.oxw().abandonarComunidad(n,e)}),c._UZ(26,"ion-icon",21),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&o){const o=i.$implicit;c.xp6(6),c.Oqu(o.nombreComunidad),c.xp6(3),c.hij(" ",o.descripcion," "),c.xp6(5),c.Oqu(o.region),c.xp6(3),c.hij(" ",o.comuna," ")}}const Z=[{path:"",component:(()=>{class o{constructor(o,i,n,e){this.usuarioService=o,this.comunidadService=i,this.ruta=n,this.alertasService=e,this.Comunidad=[],this.roles=[],this.contador=0}ngOnInit(){this.comunidadService.nuevaComunidad.subscribe(o=>{this.Comunidad=[],this.roles=[],this.obtenerComunidades()}),this.usuarioService.comunidadRemovida.subscribe(o=>{this.Comunidad=[],this.roles=[],this.obtenerComunidades()})}obtenerComunidades(){this.usuarioService.obtenerComunidadUsuario().subscribe(o=>{this.roles=[],this.Comunidad=[],this.Comunidad.push(...o.comunidades.comunidad),this.roles.push(...o.comunidades.rol)})}editarComunidad(o,i){2!=this.roles[i]?(this.comunidadService.enviarDatos(o),this.ruta.navigateByUrl("main/tabs/editar-com")):this.alertasService.alerta("No tienes permiso para actualizar esta comunidad")}abandonarComunidad(o,i){return(0,s.mG)(this,void 0,void 0,function*(){0===i?this.alertasService.alerta("No puedes abandonar esta comunidad"):yield this.alertasService.alertaDecision("\xbfDeseas abandonar esta comunidad?").then(i=>{!0===i.data&&(this.usuarioService.removerComunidad(o),this.alertasService.presentToast("Comunidad removida exitosamente"))})})}buscarComunidad(){this.ruta.navigateByUrl("main/tabs/buscar-com")}ionViewWillEnter(){this.roles=[],this.Comunidad=[],this.obtenerComunidades()}}return o.\u0275fac=function(i){return new(i||o)(c.Y36(d.i),c.Y36(u.P),c.Y36(r.F0),c.Y36(l.e))},o.\u0275cmp=c.Xpm({type:o,selectors:[["app-comunidad"]],decls:22,vars:1,consts:[[1,"cabecera"],["slot","start"],["defaultHref","/main/tabs/tab1","color","light"],["color","light",1,"vecired"],["routerLink","/main/tabs/crear-com","slot","end"],["slot","icon-only","name","add-outline","color","light"],[1,"ripple-parent"],[1,"avisosTitlte","ion-text-center"],[1,"cambiarComunidad",3,"click"],["slot","icon-only","name","search-sharp"],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12",4,"ngFor","ngForOf"],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12"],[1,"avisoUnitario"],[1,"fontColor","ion-text-center"],["name","body"],["name","document-text"],["name","location-sharp",2,"margin-bottom","-0.7vw"],[2,"margin-left","20%"],[3,"click"],["slot","icon-only","name","create-outline"],[1,"abandonarComunidad",3,"click"],["slot","icon-only","name","person-remove",2,"color","crimson"]],template:function(o,i){1&o&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar",0),c.TgZ(2,"ion-buttons",1),c._UZ(3,"ion-back-button",2),c.qZA(),c.TgZ(4,"ion-title",3),c._uU(5,"VeciRed"),c.qZA(),c.TgZ(6,"ion-buttons",4),c._UZ(7,"ion-icon",5),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"ion-content"),c.TgZ(9,"ion-grid"),c.TgZ(10,"div",6),c.TgZ(11,"ion-row"),c._UZ(12,"ion-col"),c.TgZ(13,"ion-col",7),c.TgZ(14,"b"),c._uU(15,"COMUNIDADES"),c.qZA(),c.qZA(),c.TgZ(16,"ion-col"),c.TgZ(17,"ion-buttons",8),c.NdJ("click",function(){return i.buscarComunidad()}),c._UZ(18,"ion-icon",9),c.qZA(),c.qZA(),c.qZA(),c._UZ(19,"ion-ripple-effect"),c.qZA(),c.qZA(),c.TgZ(20,"ion-row"),c.YNc(21,m,27,4,"ion-col",10),c.qZA(),c.qZA()),2&o&&(c.xp6(21),c.Q6J("ngForOf",i.Comunidad))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.YI,r.rH,a.gu,a.W2,a.jY,a.Nd,a.wI,a.H$,e.sg,a.PM,a.Zi,a.gZ,a.FN,a.YG],styles:[".avisosTitlte[_ngcontent-%COMP%]{margin-top:-1vw;font-family:monospace;font-size:x-large}.fontColor[_ngcontent-%COMP%]{color:#000}.avisoUnitario[_ngcontent-%COMP%]{box-shadow:0 0 2em rgba(30,30,31,.932);background-color:#afeeee}.cambiarComunidad[_ngcontent-%COMP%]{float:right}.cabecera[_ngcontent-%COMP%]{--background:linear-gradient(135deg,#110a3b,#2f32a0)}.vecired[_ngcontent-%COMP%]{color:#f0f8ff;font-weight:bolder;font-size:x-large;text-align:center}"]}),o})()}];let g=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[[r.Bz.forChild(Z)],r.Bz]}),o})(),h=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[[e.ez,t.u5,a.Pc,g]]}),o})()},2478:(o,i,n)=>{"use strict";n.d(i,{e:()=>r});var e=n(4762),t=n(639),a=n(7823);let r=(()=>{class o{constructor(o,i){this.alertController=o,this.toastController=i}alerta(o){return(0,e.mG)(this,void 0,void 0,function*(){const i=yield this.alertController.create({cssClass:"my-custom-class",message:o,buttons:[{text:"Ok",role:"cancel"}]});yield i.present(),yield i.onDidDismiss()})}alertaDecision(o){return(0,e.mG)(this,void 0,void 0,function*(){let i;const n=yield this.alertController.create({backdropDismiss:!1,message:o,buttons:[{text:"ACEPTAR",handler:()=>(n.dismiss(!0),!1)},{text:"Cancelar"}]});return yield n.present(),yield n.onDidDismiss().then(o=>{i=o}),i})}presentToast(o){return(0,e.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:o,position:"bottom",duration:1800})).present()})}}return o.\u0275fac=function(i){return new(i||o)(t.LFG(a.Br),t.LFG(a.yF))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);