(self.webpackChunkveciRed=self.webpackChunkveciRed||[]).push([[4210],{4210:(e,o,i)=>{"use strict";i.d(o,{g:()=>d});var n=i(639),t=i(6014),c=i(7860),r=i(7823),s=i(2478),a=i(665);let d=(()=>{class e{constructor(e,o,i,n){this.acuerdosService=e,this.router=o,this.navCtrl=i,this.alertasService=n,this.opciones=[],this.titulos="",this.opcion1={titulo:"",descripcion:"",votos:0},this.opcion2={titulo:"",descripcion:"",votos:0},this.opcion3={titulo:"",descripcion:"",votos:0},this.opcion4={titulo:"",descripcion:"",votos:0},this.ocultarOpcion3=!0,this.ocultarOpcion4=!0,this.contador=0,this.desactivarBotonAdd=!1,this.desactivarBotonRemove=!0}ngOnInit(){this.acuerdosService.Objeto.subscribe(e=>{1==e&&this.limpiar()})}agregarOpcion(){this.contador++,this.contador>0&&(this.ocultarOpcion3=!1,this.desactivarBotonRemove=!1),this.contador>1&&(this.ocultarOpcion4=!1,this.desactivarBotonAdd=!0)}eliminarOpcion(){this.contador--,this.contador<1&&(this.ocultarOpcion3=!0,this.desactivarBotonRemove=!0),this.contador<2&&(this.ocultarOpcion4=!0,this.desactivarBotonAdd=!1)}enviarOpciones(){null==this.validacion()&&(this.opciones.push(this.opcion1),this.opciones.push(this.opcion2),this.contador>=1&&this.opciones.push(this.opcion3),2==this.contador&&this.opciones.push(this.opcion4),this.acuerdosService.enviarDatos(this.opciones),this.router.navigate(["/main/tabs/crear-acuerdo"]),this.opciones=[])}validacion(){if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,30})+$/g.test(this.opcion1.titulo))return this.alertasService.alerta("Las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 30.");if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,250})+$/g.test(this.opcion1.descripcion))return this.alertasService.alerta("Las descripciones de las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 250.");if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,30})+$/g.test(this.opcion2.titulo))return this.alertasService.alerta("Las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 30.");if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,250})+$/g.test(this.opcion2.descripcion))return this.alertasService.alerta("Las descripciones de las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 250.");if(this.contador>=1){if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,30})+$/g.test(this.opcion3.titulo))return this.alertasService.alerta("Las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 30.");if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,250})+$/g.test(this.opcion3.descripcion))return this.alertasService.alerta("Las descripciones de las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 250.")}if(2==this.contador){if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,30})+$/g.test(this.opcion4.titulo))return this.alertasService.alerta("Las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 30.");if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,250})+$/g.test(this.opcion4.descripcion))return this.alertasService.alerta("Las descripciones de las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 250.")}}limpiar(){this.opcion1.titulo="",this.opcion2.titulo="",this.opcion3.titulo="",this.opcion4.titulo="",this.opcion1.descripcion="",this.opcion2.descripcion="",this.opcion3.descripcion="",this.opcion4.descripcion=""}}return e.\u0275fac=function(o){return new(o||e)(n.Y36(t.U),n.Y36(c.F0),n.Y36(r.SH),n.Y36(s.e))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-opciones"]],decls:82,vars:27,consts:[[1,"cabecera"],["slot","start"],["defaultHref","/main/tabs/crear-acuerdo","color","light"],["color","light",1,"vecired"],["slot","end"],["disabled",""],[1,"titulo"],[1,"ion-text-center"],["position","floating"],["type","text","minlength","3","maxlength","30","required","",3,"ngModel","ngModelChange"],[1,"caracteres"],["minlength","3","maxlength","250","required","",3,"ngModel","ngModelChange"],[3,"hidden"],[1,"caracteres",3,"hidden"],["offset","3"],[1,"botones",3,"click"],["shape","round",3,"disabled"],["name","add-circle-outline"],[1,"botones"],["shape","round",3,"disabled","click"],["name","remove-circle-outline"],["color","tertiary","shape","round","expand","full",1,"sendData",3,"disabled","click"]],template:function(e,o){1&e&&(n.TgZ(0,"ion-header"),n.TgZ(1,"ion-toolbar",0),n.TgZ(2,"ion-buttons",1),n._UZ(3,"ion-back-button",2),n.qZA(),n.TgZ(4,"ion-title",3),n._uU(5," VeciRed "),n.qZA(),n.TgZ(6,"ion-buttons",4),n.TgZ(7,"ion-button",5),n._UZ(8,"ion-icon"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"ion-content"),n.TgZ(10,"div",6),n.TgZ(11,"h4",7),n.TgZ(12,"b"),n._uU(13,"OPCIONES"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"ion-list"),n.TgZ(15,"ion-item"),n.TgZ(16,"ion-label",8),n.TgZ(17,"b"),n._uU(18,"Opci\xf3n 1:"),n.qZA(),n.qZA(),n.TgZ(19,"ion-input",9),n.NdJ("ngModelChange",function(e){return o.opcion1.titulo=e}),n.qZA(),n.qZA(),n.TgZ(20,"span",10),n._uU(21),n.qZA(),n.TgZ(22,"ion-item"),n.TgZ(23,"ion-label",8),n.TgZ(24,"b"),n._uU(25,"Descripci\xf3n:"),n.qZA(),n.qZA(),n.TgZ(26,"ion-textarea",11),n.NdJ("ngModelChange",function(e){return o.opcion1.descripcion=e}),n.qZA(),n.qZA(),n.TgZ(27,"span",10),n._uU(28),n.qZA(),n.TgZ(29,"ion-item"),n.TgZ(30,"ion-label",8),n.TgZ(31,"b"),n._uU(32,"Opci\xf3n 2:"),n.qZA(),n.qZA(),n.TgZ(33,"ion-input",9),n.NdJ("ngModelChange",function(e){return o.opcion2.titulo=e}),n.qZA(),n.qZA(),n.TgZ(34,"span",10),n._uU(35),n.qZA(),n.TgZ(36,"ion-item"),n.TgZ(37,"ion-label",8),n.TgZ(38,"b"),n._uU(39,"Descripci\xf3n:"),n.qZA(),n.qZA(),n.TgZ(40,"ion-textarea",11),n.NdJ("ngModelChange",function(e){return o.opcion2.descripcion=e}),n.qZA(),n.qZA(),n.TgZ(41,"span",10),n._uU(42),n.qZA(),n.TgZ(43,"ion-item",12),n.TgZ(44,"ion-label",8),n.TgZ(45,"b"),n._uU(46,"Opci\xf3n 3:"),n.qZA(),n.qZA(),n.TgZ(47,"ion-input",9),n.NdJ("ngModelChange",function(e){return o.opcion3.titulo=e}),n.qZA(),n.qZA(),n.TgZ(48,"span",13),n._uU(49),n.qZA(),n.TgZ(50,"ion-item",12),n.TgZ(51,"ion-label",8),n.TgZ(52,"b"),n._uU(53,"Descripci\xf3n:"),n.qZA(),n.qZA(),n.TgZ(54,"ion-textarea",11),n.NdJ("ngModelChange",function(e){return o.opcion3.descripcion=e}),n.qZA(),n.qZA(),n.TgZ(55,"span",13),n._uU(56),n.qZA(),n.TgZ(57,"ion-item",12),n.TgZ(58,"ion-label",8),n.TgZ(59,"b"),n._uU(60,"Opci\xf3n 4:"),n.qZA(),n.qZA(),n.TgZ(61,"ion-input",9),n.NdJ("ngModelChange",function(e){return o.opcion4.titulo=e}),n.qZA(),n.qZA(),n.TgZ(62,"span",13),n._uU(63),n.qZA(),n.TgZ(64,"ion-item",12),n.TgZ(65,"ion-label",8),n.TgZ(66,"b"),n._uU(67,"Descripci\xf3n:"),n.qZA(),n.qZA(),n.TgZ(68,"ion-textarea",11),n.NdJ("ngModelChange",function(e){return o.opcion4.descripcion=e}),n.qZA(),n.qZA(),n.TgZ(69,"span",13),n._uU(70),n.qZA(),n.TgZ(71,"ion-row"),n.TgZ(72,"ion-col",14),n.TgZ(73,"ion-buttons",15),n.NdJ("click",function(){return o.agregarOpcion()}),n.TgZ(74,"ion-button",16),n._UZ(75,"ion-icon",17),n.qZA(),n.qZA(),n.qZA(),n.TgZ(76,"ion-col"),n.TgZ(77,"ion-buttons",18),n.TgZ(78,"ion-button",19),n.NdJ("click",function(){return o.eliminarOpcion()}),n._UZ(79,"ion-icon",20),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(80,"ion-button",21),n.NdJ("click",function(){return o.enviarOpciones()}),n._uU(81," Enviar "),n.qZA(),n.qZA()),2&e&&(n.xp6(19),n.Q6J("ngModel",o.opcion1.titulo),n.xp6(2),n.hij("",30-o.opcion1.titulo.length," caracteres restantes"),n.xp6(5),n.Q6J("ngModel",o.opcion1.descripcion),n.xp6(2),n.hij("",250-o.opcion1.descripcion.length," caracteres restantes"),n.xp6(5),n.Q6J("ngModel",o.opcion2.titulo),n.xp6(2),n.hij("",30-o.opcion2.titulo.length," caracteres restantes"),n.xp6(5),n.Q6J("ngModel",o.opcion2.descripcion),n.xp6(2),n.hij("",250-o.opcion2.descripcion.length," caracteres restantes"),n.xp6(1),n.Q6J("hidden",o.ocultarOpcion3),n.xp6(4),n.Q6J("ngModel",o.opcion3.titulo),n.xp6(1),n.Q6J("hidden",o.ocultarOpcion3),n.xp6(1),n.hij("",30-o.opcion3.titulo.length," caracteres restantes"),n.xp6(1),n.Q6J("hidden",o.ocultarOpcion3),n.xp6(4),n.Q6J("ngModel",o.opcion3.descripcion),n.xp6(1),n.Q6J("hidden",o.ocultarOpcion3),n.xp6(1),n.hij("",250-o.opcion3.descripcion.length," caracteres restantes"),n.xp6(1),n.Q6J("hidden",o.ocultarOpcion4),n.xp6(4),n.Q6J("ngModel",o.opcion4.titulo),n.xp6(1),n.Q6J("hidden",o.ocultarOpcion4),n.xp6(1),n.hij("",30-o.opcion4.titulo.length," caracteres restantes"),n.xp6(1),n.Q6J("hidden",o.ocultarOpcion4),n.xp6(4),n.Q6J("ngModel",o.opcion4.descripcion),n.xp6(1),n.Q6J("hidden",o.ocultarOpcion4),n.xp6(1),n.hij("",250-o.opcion4.descripcion.length," caracteres restantes"),n.xp6(4),n.Q6J("disabled",o.desactivarBotonAdd),n.xp6(4),n.Q6J("disabled",o.desactivarBotonRemove),n.xp6(2),n.Q6J("disabled",o.opcion1.titulo.length<3||o.opcion1.descripcion.length<3||o.opcion2.titulo.length<3||o.opcion2.descripcion.length<3||o.opcion3.titulo.length<3&&o.contador>0||o.opcion3.descripcion.length<3&&o.contador>0||o.opcion4.titulo.length<3&&o.contador>1||o.opcion4.descripcion.length<3&&o.contador>1))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.YG,r.gu,r.W2,r.q_,r.Ie,r.Q$,r.pK,r.j9,a.wO,a.nD,a.Q7,a.JJ,a.On,r.g2,r.Nd,r.wI],styles:[".titulo[_ngcontent-%COMP%]{margin-top:-3%;font-family:monospace}.caracteres[_ngcontent-%COMP%]{font-size:small;margin-left:55%;color:grey}.cabecera[_ngcontent-%COMP%]{--background:linear-gradient(135deg,#110a3b,#2f32a0)}.vecired[_ngcontent-%COMP%]{color:#f0f8ff;font-weight:bolder;font-size:x-large;text-align:center}"]}),e})()},6014:(e,o,i)=>{"use strict";i.d(o,{U:()=>p});var n=i(1841),t=i(639),c=i(2340),r=i(1929),s=i(4975),a=i(7905);const d=c.N.url;let p=(()=>{class e{constructor(e,o,i){this.http=e,this.usuarioService=o,this.fileTransfer=i,this.pagiaAcuerdos=0,this.Objeto=new r.t,this.nuevoAcuerdo=new t.vpe,this.acuerdoEliminado=new t.vpe}getAcuerdos(e=!1){e&&(this.pagiaAcuerdos=0);const o=new n.WM({UToken:this.usuarioService.userToken});return this.pagiaAcuerdos++,this.http.get(`${d}/acuerdos/?pagina=${this.pagiaAcuerdos}`,{headers:o})}crearAcuerdo(e){const o=new n.WM({UToken:this.usuarioService.userToken});return new Promise(i=>{this.http.post(`${d}/acuerdos`,e,{headers:o}).subscribe(e=>{this.nuevoAcuerdo.emit(e.acuerdo),i(!0)})})}enviarDatos(e,o){e.tipo=o,this.Objeto.next(e)}limpiar(e){this.Objeto.next(e)}actualizarAcuerdo(e){const o=new n.WM({UToken:this.usuarioService.userToken});return new Promise(i=>{this.http.post(`${d}/acuerdos/actualizar`,e,{headers:o}).subscribe(e=>{i(!!e.ok)})})}eliminarAcuerdo(e){const o=new n.WM({UToken:this.usuarioService.userToken});return new Promise(i=>{this.http.post(`${d}/acuerdos/actualizar`,e,{headers:o}).subscribe(e=>{e.ok?(this.acuerdoEliminado.emit(e.acuerdo),i(!0)):i(!1)})})}subirImagen(e){const o={fileKey:"imagenAcuerdo",headers:{UToken:this.usuarioService.userToken}};this.fileTransfer.create().upload(e,`${d}/acuerdos/upload`,o).then(e=>{console.log(e)}).catch(e=>{console.log("Fallo al subir imagen:",e)})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(n.eN),t.LFG(s.i),t.LFG(a.K))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);