(self.webpackChunkveciRed=self.webpackChunkveciRed||[]).push([[2183],{2183:(i,o,e)=>{"use strict";e.r(o),e.d(o,{MisAvisosPageModule:()=>T});var n=e(8583),t=e(665),s=e(7823),r=e(7860),a=e(4762),c=e(6175),l=e(639),d=e(5348),g=e(2478),u=e(4975),v=e(8320);function m(i,o){1&i&&(l.TgZ(0,"ion-card",14),l.TgZ(1,"h3",15),l.TgZ(2,"b"),l._uU(3,"A\xfan no has creado ning\xfan aviso"),l.qZA(),l.qZA(),l._UZ(4,"img",16),l.TgZ(5,"h3",15),l.TgZ(6,"b"),l._uU(7,"\xa1Crea el primero!"),l.qZA(),l.qZA(),l.qZA())}function Z(i,o){if(1&i&&(l._UZ(0,"img",33),l.ALo(1,"mostrarImagen")),2&i){const i=l.oxw().$implicit;l.s9C("src",l.xi3(1,1,i.imagenAviso,i.usuario._id),l.LSH)}}const f=function(i,o,e,n){return{redEvent:i,yellowEvent:o,greenEvent:e,blueEvent:n}};function h(i,o){if(1&i){const i=l.EpF();l.TgZ(0,"ion-col",17),l.TgZ(1,"ion-card",18),l.TgZ(2,"ion-card-header"),l.TgZ(3,"ion-card-subtitle",19),l._UZ(4,"ion-icon",20),l._uU(5),l.qZA(),l.TgZ(6,"ion-card-title",21),l.TgZ(7,"b"),l._uU(8),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"ion-card-content",19),l._UZ(10,"ion-icon",22),l._uU(11),l.YNc(12,Z,2,4,"img",23),l.TgZ(13,"ion-row",21),l.TgZ(14,"ion-col",24),l._UZ(15,"ion-icon",25),l._uU(16),l.qZA(),l.TgZ(17,"ion-col",26),l._uU(18),l._UZ(19,"ion-icon",27),l.qZA(),l.qZA(),l.TgZ(20,"ion-row"),l.TgZ(21,"ion-col",28),l.TgZ(22,"ion-buttons"),l.TgZ(23,"ion-button",29),l.NdJ("click",function(){const o=l.CHM(i).$implicit;return l.oxw().editarAviso(o)}),l._UZ(24,"ion-icon",30),l.qZA(),l.qZA(),l.qZA(),l.TgZ(25,"ion-col"),l.TgZ(26,"ion-buttons"),l.TgZ(27,"ion-button",31),l.NdJ("click",function(){const o=l.CHM(i).$implicit;return l.oxw().eliminarAviso(o)}),l._UZ(28,"ion-icon",32),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&i){const i=o.$implicit;l.xp6(1),l.Q6J("ngClass",l.l5B(7,f,1===i.tipoAviso,5===i.tipoAviso,4===i.tipoAviso,3===i.tipoAviso)),l.xp6(4),l.hij(" ",i.comunidad.nombreComunidad," "),l.xp6(3),l.Oqu(i.titulo),l.xp6(3),l.hij(" ",i.descripcion," "),l.xp6(1),l.Q6J("ngIf",i.imagenAviso.length>0),l.xp6(4),l.hij(" ",i.fechaCreacion," "),l.xp6(2),l.hij(" ",i.usuario.nombre," ")}}const A=[{path:"",component:(()=>{class i{constructor(i,o,e,n,t){this.AvisosService=i,this.ruta=o,this.modalController=e,this.alertasService=n,this.usuarioService=t,this.misAvisos=[],this.infiniteScroll=!0,this.emptyMisAvisos=!1,this.disabledCrear=!1,this.usuario={}}ngOnInit(){this.AvisosService.avisoEliminado.subscribe(i=>{this.misAvisos=[],this.refresher()})}avisosPorUsuario(i,o=!1){o&&(this.misAvisos=[],this.infiniteScroll=!0),this.AvisosService.obtenerAvisosUsuario(o).subscribe(o=>{this.misAvisos.push(...o.avisosPublicados),this.emptyMisAvisos=0==o.avisosPublicados.length&&1===o.pagina,i&&(i.target.complete(),0==o.avisosPublicados.length&&(this.infiniteScroll=!1))})}refresher(i){this.misAvisos=[],this.avisosPorUsuario(i,!0)}editarAviso(i){this.AvisosService.enviarDatos(i),this.ruta.navigateByUrl("main/tabs/editar-aviso")}eliminarAviso(i){return(0,a.mG)(this,void 0,void 0,function*(){yield this.alertasService.alertaDecision("Este aviso ser\xe1 eliminado permanentemente").then(o=>{!0===o.data?(i.estadoAviso=0,this.AvisosService.eliminarAviso(i),this.alertasService.presentToast("Aviso eliminado exitosamente")):console.log("No desea eliminar")})})}openModal(){return(0,a.mG)(this,void 0,void 0,function*(){const i=yield this.modalController.create({component:c.$});yield i.present()})}ionViewWillEnter(){this.misAvisos=[],this.refresher(),this.validarCrearAviso()}NavegarCrearAviso(){this.ruta.navigateByUrl("main/tabs/crear-aviso")}validarCrearAviso(){this.usuario=this.usuarioService.obtenerUsuario(),this.usuarioService.obtenerRolBD().subscribe(i=>{this.disabledCrear="64a0d54909003038cecc7443"==String(this.usuario.comunidad)&&2==i.currentRol})}}return i.\u0275fac=function(o){return new(o||i)(l.Y36(d.U),l.Y36(r.F0),l.Y36(s.IN),l.Y36(g.e),l.Y36(u.i))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-mis-avisos"]],decls:24,vars:4,consts:[[1,"cabecera"],["slot","start"],["defaultHref","/main/tabs/tab1","color","light"],["color","light",1,"vecired"],["size","large","fill","clear","slot","end"],[3,"disabled","click"],["slot","icon-only","name","add-outline","color","light"],["slot","fixed",3,"ionRefresh"],[1,"ripple-parent"],[1,"avisosTitlte","ion-text-center"],["class","noAvisos",4,"ngIf"],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12",4,"ngFor","ngForOf"],["threshold","100px",3,"disabled","ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],[1,"noAvisos"],[1,"noAvisosTitle"],["src","/../../assets/sadHouse.png",1,"noAvisosImage"],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12"],[1,"avisoUnitario",3,"ngClass"],[1,"fontColor","ion-text-center"],["name","body"],[1,"ion-text-center"],["name","document-text-outline"],["class","formatoImagen",3,"src",4,"ngIf"],[2,"margin-top","-0.5%"],["name","calendar-sharp"],[2,"margin-top","-1%"],["name","person"],[2,"margin-left","20%"],[1,"editarAviso",3,"click"],["slot","icon-only","name","create-outline"],[1,"eliminarAviso",3,"click"],["slot","icon-only","name","trash-outline"],[1,"formatoImagen",3,"src"]],template:function(i,o){1&i&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button",2),l.qZA(),l.TgZ(4,"ion-title",3),l._uU(5,"VeciRed"),l.qZA(),l.TgZ(6,"ion-buttons",4),l.TgZ(7,"ion-button",5),l.NdJ("click",function(){return o.NavegarCrearAviso()}),l._UZ(8,"ion-icon",6),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"ion-content"),l.TgZ(10,"ion-refresher",7),l.NdJ("ionRefresh",function(i){return o.refresher(i)}),l._UZ(11,"ion-refresher-content"),l.qZA(),l.TgZ(12,"ion-grid"),l.TgZ(13,"div",8),l.TgZ(14,"ion-row"),l.TgZ(15,"ion-col",9),l.TgZ(16,"b"),l._uU(17,"MIS AVISOS"),l.qZA(),l.qZA(),l.qZA(),l._UZ(18,"ion-ripple-effect"),l.qZA(),l.qZA(),l.YNc(19,m,8,0,"ion-card",10),l.TgZ(20,"ion-row"),l.YNc(21,h,29,12,"ion-col",11),l.TgZ(22,"ion-infinite-scroll",12),l.NdJ("ionInfinite",function(i){return o.avisosPorUsuario(i)}),l._UZ(23,"ion-infinite-scroll-content",13),l.qZA(),l.qZA(),l.qZA()),2&i&&(l.xp6(7),l.Q6J("disabled",o.disabledCrear),l.xp6(12),l.Q6J("ngIf",o.emptyMisAvisos),l.xp6(2),l.Q6J("ngForOf",o.misAvisos),l.xp6(1),l.Q6J("disabled",!o.infiniteScroll))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.YG,s.gu,s.W2,s.nJ,s.Wo,s.jY,s.Nd,s.wI,s.H$,n.O5,n.sg,s.ju,s.MB,s.PM,n.mk,s.Zi,s.tO,s.gZ,s.FN],pipes:[v.P],styles:[".avisosTitlte[_ngcontent-%COMP%]{margin-top:-1vw;font-family:monospace;font-size:x-large}.avisoUnitario[_ngcontent-%COMP%]{box-shadow:0 0 2em rgba(30,30,31,.932)}.formatoImagen[_ngcontent-%COMP%]{width:100%;height:250px;object-fit:cover;border:2px solid #241816}.avisosDescripcion[_ngcontent-%COMP%]{font-size:small;color:#000;text-align:justify;text-justify:inter-word;width:90%;margin-left:4%}.redEvent[_ngcontent-%COMP%]{background-color:#f014144d}.greenEvent[_ngcontent-%COMP%]{background-color:#5bf00440}.yellowEvent[_ngcontent-%COMP%]{background-color:#e6f51b40}.blueEvent[_ngcontent-%COMP%]{background-color:#2c75d440}.fontColor[_ngcontent-%COMP%]{color:#000}.noAvisos[_ngcontent-%COMP%]{border:2px solid #241816;border-bottom-left-radius:9%;border-bottom-right-radius:9%;border-top-left-radius:9%;border-top-right-radius:9%;box-shadow:0 0 2em rgba(30,30,31,.932);background-color:#afeeee}.noAvisosTitle[_ngcontent-%COMP%]{color:#000;font-family:Perpetua;text-align:center;font-family:monospace}.noAvisosImage[_ngcontent-%COMP%]{margin-left:30%;width:40%;height:50%;max-height:70%}.cabecera[_ngcontent-%COMP%]{--background:linear-gradient(135deg,#110a3b,#2f32a0)}.vecired[_ngcontent-%COMP%]{color:#f0f8ff;font-weight:bolder;font-size:x-large;text-align:center}"]}),i})()}];let b=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[r.Bz.forChild(A)],r.Bz]}),i})();var p=e(5503);let T=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[n.ez,t.u5,s.Pc,b,p.D]]}),i})()},5503:(i,o,e)=>{"use strict";e.d(o,{D:()=>t});var n=e(639);let t=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({}),i})()}}]);