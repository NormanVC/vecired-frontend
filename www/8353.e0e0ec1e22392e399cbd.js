(self.webpackChunkveciRed=self.webpackChunkveciRed||[]).push([[8353],{8353:(e,a,o)=>{"use strict";o.r(a),o.d(a,{CrearAcuerdoPageModule:()=>Z});var n=o(8583),t=o(665),i=o(7823),r=o(7860),c=o(4762),s=o(4210),l=o(639),d=o(6014),u=o(4267),g=o(2478);function h(e,a){if(1&e&&(l.TgZ(0,"ion-grid"),l.TgZ(1,"ion-card"),l._UZ(2,"img",26),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(2),l.Q6J("src",e.tempImages,l.LSH)}}const m=[{path:"",component:(()=>{class e{constructor(e,a,o,n,t){this.acuerdosService=e,this.navCtrl=a,this.camera=o,this.alertasService=n,this.platform=t,this.today=new Date,this.minTime=this.today.toISOString(),this.hora=null,this.acuerdo={titulo:"",descripcion:"",fecha:null,hora:null,duracion:null,opciones:{}}}ngOnInit(){this.plataforma=!this.platform.is("capacitor"),this.acuerdosService.Objeto.subscribe(e=>{this.acuerdo.opciones=e})}crearAcuerdo(){return(0,c.mG)(this,void 0,void 0,function*(){const e=new n.uU("en-US");if(this.acuerdo.fecha=e.transform(this.fecha,"YYYY-MM-dd"),this.acuerdo.hora=e.transform(this.hora,"HH:mm"),null==this.validacion()){const e=yield this.acuerdosService.crearAcuerdo(this.acuerdo);this.acuerdo={titulo:"",descripcion:"",fecha:null,hora:null,duracion:null,opciones:{}},this.tempImages="",this.acuerdosService.limpiar(!0),e?(this.navCtrl.navigateRoot("/main/tabs/acuerdos",{animated:!0}),this.alertasService.presentToast("Acuerdo creado exitosamente")):this.alertasService.presentToast("El acuerdo no pudo ser creado")}})}validacion(){if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,30})+$/g.test(this.acuerdo.titulo))return this.alertasService.alerta("El t\xedtulo del acuerdo no permite tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 30.");if(null==this.acuerdo.fecha)return this.alertasService.alerta("Debe seleccionar una d\xeda");const e=new Date(this.today);return e.setDate(e.getDate()-1),this.acuerdo.fecha<e.toISOString()?this.alertasService.alerta("El d\xeda seleccionado no debe ser anterior a la fecha actual"):(console.log(new Date("2122-03-07").toISOString()),console.log(this.acuerdo.fecha),this.acuerdo.fecha>new Date("2122-03-07").toISOString()?this.alertasService.alerta("El d\xeda seleccionado no debe superar el 07/03/2122"):null==this.acuerdo.hora?this.alertasService.alerta("Debe seleccionar una hora"):null==this.acuerdo.duracion?this.alertasService.alerta("Debe seleccionar una duracion"):this.acuerdo.duracion<1?this.alertasService.alerta("La duraci\xf3n del acuerdo no puede ser menor a 1 hora"):this.acuerdo.duracion>48?this.alertasService.alerta("La duraci\xf3n del acuerdo no puede ser mayor a 48 horas"):0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,250})+$/g.test(this.acuerdo.descripcion)?this.alertasService.alerta("La descripci\xf3n del acuerdo no permite tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 250."):0===Object.keys(this.acuerdo.opciones).length?this.alertasService.alerta("Las opciones no pueden estar vacias"):null)}galeria(){this.camera.getPicture({quality:50,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY}).then(e=>{const a=window.Ionic.WebView.convertFileSrc(e);this.acuerdosService.subirImagen(e),this.tempImages=a},e=>{console.log(e)})}mostrarOpciones(){this.acuerdo.opciones={},this.navCtrl.navigateRoot("/main/tabs/opciones",{animated:!0})}volverAtras(){this.acuerdosService.limpiar(!0),this.acuerdo={titulo:"",descripcion:"",fecha:null,hora:null,duracion:null,opciones:{}}}}return e.\u0275fac=function(a){return new(a||e)(l.Y36(d.U),l.Y36(i.SH),l.Y36(u.V1),l.Y36(g.e),l.Y36(i.t4))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-crear-acuerdo"]],viewQuery:function(e,a){if(1&e&&l.Gf(s.g,5),2&e){let e;l.iGM(e=l.CRH())&&(a.child=e.first)}},decls:62,vars:13,consts:[[1,"cabecera"],["slot","start"],["defaultHref","/main/tabs/acuerdos","color","light"],["color","light",1,"vecired"],["slot","end"],["disabled",""],["padding","","color","light"],[1,"titulo"],[1,"ion-text-center"],[1,"color-fondo"],["position","floating"],["type","text","minlength","3","maxlength","30","required","",3,"ngModel","ngModelChange"],[1,"caracteres"],["display-format","DD/MMMM/YYYY","picker-format","DD/MMMM/YYYY","month-names","Ene, Feb, Mar, Abr, May, Jun, Jul, Ago, Sep, Oct, Nov, Dic","max","2122-03-07","doneText","Aceptar","cancelText","Cancelar","required","",3,"min","ngModel","ngModelChange"],["display-format","HH:mm","picker-format","HH mm","doneText","Aceptar","cancelText","Cancelar","required","",3,"ngModel","ngModelChange"],["type","number","min","0","max","48","required","",3,"ngModel","ngModelChange"],["minlength","3","maxlength","250","required","",3,"ngModel","ngModelChange"],["detail","true",3,"click"],[3,"hidden"],[2,"width","100%","margin-top","3%"],["size","6"],[2,"margin-top","4.5%"],["expand","full","shape","round",2,"margin-bottom","9%",3,"click"],["slot","start","name","images"],[4,"ngIf"],["color","tertiary","shape","round","expand","full",1,"sendData",3,"disabled","click"],[1,"formatoImagen",3,"src"]],template:function(e,a){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button",2),l.qZA(),l.TgZ(4,"ion-title",3),l._uU(5," VeciRed "),l.qZA(),l.TgZ(6,"ion-buttons",4),l.TgZ(7,"ion-button",5),l._UZ(8,"ion-icon"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"ion-content",6),l.TgZ(10,"div",7),l.TgZ(11,"h4",8),l.TgZ(12,"b"),l._uU(13,"CREAR ACUERDO"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"ion-list",9),l.TgZ(15,"ion-item"),l.TgZ(16,"ion-label",10),l.TgZ(17,"b"),l._uU(18,"T\xedtulo:"),l.qZA(),l.qZA(),l.TgZ(19,"ion-input",11),l.NdJ("ngModelChange",function(e){return a.acuerdo.titulo=e}),l.qZA(),l.qZA(),l.TgZ(20,"span",12),l._uU(21),l.qZA(),l.TgZ(22,"ion-item"),l.TgZ(23,"ion-label",10),l.TgZ(24,"b"),l._uU(25,"D\xeda:"),l.qZA(),l.qZA(),l.TgZ(26,"ion-datetime",13),l.NdJ("ngModelChange",function(e){return a.fecha=e}),l.qZA(),l.qZA(),l.TgZ(27,"ion-item"),l.TgZ(28,"ion-label",10),l.TgZ(29,"b"),l._uU(30,"Hora:"),l.qZA(),l.qZA(),l.TgZ(31,"ion-datetime",14),l.NdJ("ngModelChange",function(e){return a.hora=e}),l.qZA(),l.qZA(),l.TgZ(32,"ion-item"),l.TgZ(33,"ion-label",10),l.TgZ(34,"b"),l._uU(35,"Duraci\xf3n (max. 48 horas):"),l.qZA(),l.qZA(),l.TgZ(36,"ion-input",15),l.NdJ("ngModelChange",function(e){return a.acuerdo.duracion=e}),l.qZA(),l.qZA(),l.TgZ(37,"ion-item"),l.TgZ(38,"ion-label",10),l.TgZ(39,"b"),l._uU(40,"Descripci\xf3n:"),l.qZA(),l.qZA(),l.TgZ(41,"ion-textarea",16),l.NdJ("ngModelChange",function(e){return a.acuerdo.descripcion=e}),l.qZA(),l.qZA(),l.TgZ(42,"span",12),l._uU(43),l.qZA(),l.TgZ(44,"ion-item",17),l.NdJ("click",function(){return a.mostrarOpciones()}),l.TgZ(45,"ion-label"),l.TgZ(46,"b"),l._uU(47,"Opciones"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(48,"ion-item",18),l.TgZ(49,"ion-row",19),l.TgZ(50,"ion-col",20),l.TgZ(51,"ion-label",21),l.TgZ(52,"b"),l._uU(53,"Imagen:"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(54,"ion-col",20),l.TgZ(55,"ion-button",22),l.NdJ("click",function(){return a.galeria()}),l._UZ(56,"ion-icon",23),l._uU(57," Galer\xeda "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(58,h,3,1,"ion-grid",24),l.qZA(),l.TgZ(59,"ion-button",25),l.NdJ("click",function(){return a.crearAcuerdo()}),l.ALo(60,"json"),l._uU(61," Publicar "),l.qZA(),l.qZA()),2&e&&(l.xp6(19),l.Q6J("ngModel",a.acuerdo.titulo),l.xp6(2),l.hij("",30-a.acuerdo.titulo.length," caracteres restantes"),l.xp6(5),l.Q6J("min",a.minTime)("ngModel",a.fecha),l.xp6(5),l.Q6J("ngModel",a.hora),l.xp6(5),l.Q6J("ngModel",a.acuerdo.duracion),l.xp6(5),l.Q6J("ngModel",a.acuerdo.descripcion),l.xp6(2),l.hij("",250-a.acuerdo.descripcion.length," caracteres restantes"),l.xp6(5),l.Q6J("hidden",a.plataforma),l.xp6(10),l.Q6J("ngIf",a.tempImages),l.xp6(1),l.Q6J("disabled",a.acuerdo.titulo.length<3||a.acuerdo.descripcion.length<3||null==a.fecha||null==a.hora||a.acuerdo.duracion<1||"{}"==l.lcZ(60,11,a.acuerdo.opciones)))},directives:[i.Gu,i.sr,i.Sm,i.oU,i.cs,i.wd,i.YG,i.gu,i.W2,i.q_,i.Ie,i.Q$,i.pK,i.j9,t.wO,t.nD,t.Q7,t.JJ,t.On,i.x4,i.QI,i.as,i.g2,i.Nd,i.wI,n.O5,i.jY,i.PM],pipes:[n.Ts],styles:["ion-item[_ngcontent-%COMP%]{--background:#f4f5f8}.titulo[_ngcontent-%COMP%]{margin-top:-3%;font-family:monospace}.caracteres[_ngcontent-%COMP%]{font-size:small;margin-left:55%;background-color:#f4f5f8;color:grey}.cabecera[_ngcontent-%COMP%]{--background:linear-gradient(135deg,#110a3b,#2f32a0)}.color-fondo[_ngcontent-%COMP%]{background-color:#f4f5f8}.formatoImagen[_ngcontent-%COMP%]{width:100%;height:250px}.vecired[_ngcontent-%COMP%]{color:#f0f8ff;font-weight:bolder;font-size:x-large;text-align:center}"]}),e})()}];let p=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.Bz.forChild(m)],r.Bz]}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,t.u5,i.Pc,p]]}),e})()}}]);