(self.webpackChunkveciRed=self.webpackChunkveciRed||[]).push([[1410],{5369:(e,i,t)=>{"use strict";t.d(i,{r:()=>a});var o=t(8583),n=t(7823),r=t(5503),s=t(665),c=t(639);let a=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.ez,n.Pc,r.D,s.u5]]}),e})()},1410:(e,i,t)=>{"use strict";t.r(i),t.d(i,{GestCertPageModule:()=>Z});var o=t(8583),n=t(665),r=t(7823),s=t(7860),c=t(639),a=t(2977),l=t(2478);function d(e,i){1&e&&(c.TgZ(0,"ion-grid"),c.TgZ(1,"ion-card",14),c._UZ(2,"img",15),c.TgZ(3,"h3",16),c.TgZ(4,"b"),c._uU(5,"No existen solicitudes de certificado en tu comunidad."),c.qZA(),c.qZA(),c.qZA(),c.qZA())}function u(e,i){if(1&e){const e=c.EpF();c.TgZ(0,"ion-col",17),c.TgZ(1,"ion-card",18),c.TgZ(2,"ion-card-header"),c.TgZ(3,"ion-card-subtitle",19),c._UZ(4,"ion-icon",20),c._uU(5),c.qZA(),c.TgZ(6,"ion-card-subtitle",19),c._UZ(7,"ion-icon",21),c._uU(8),c.qZA(),c.TgZ(9,"ion-card-title",22),c.TgZ(10,"b"),c._uU(11),c.qZA(),c.qZA(),c.TgZ(12,"ion-card-content",19),c._UZ(13,"ion-icon",23),c._uU(14),c.TgZ(15,"ion-row"),c.TgZ(16,"ion-col"),c.TgZ(17,"ion-button",24),c.NdJ("click",function(){const i=c.CHM(e).$implicit;return c.oxw().aprobarSolicitud(i._id)}),c._uU(18," aceptar "),c.qZA(),c.qZA(),c.TgZ(19,"ion-col"),c.TgZ(20,"ion-button",25),c.NdJ("click",function(){const i=c.CHM(e).$implicit;return c.oxw().rechazarSolicitud(i._id)}),c._uU(21," rechazar "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=i.$implicit;c.xp6(5),c.hij(" ",e.comunidad.nombreComunidad," "),c.xp6(3),c.hij(" ",e.certificado.titulo," "),c.xp6(3),c.Oqu(e.usuario.nombre),c.xp6(3),c.hij(" ",e.motivo," ")}}function g(e,i){1&e&&(c.TgZ(0,"div",26),c.TgZ(1,"p"),c._uU(2,"No hay m\xe1s solicitudes de certificado disponibles."),c.qZA(),c.qZA())}const m=[{path:"",component:(()=>{class e{constructor(e,i){this.emisorService=e,this.alertaService=i,this.emisores=[],this.emptySolicitud=!1,this.infiniteScroll=!0,this.pagina=1}ngOnInit(){this.emisores=[],this.obtenerSolicitudes()}obtenerSolicitudes(e){this.emisorService.getEmisor(this.pagina).subscribe(i=>{const t=i.emisor;if(0===t.length)return this.infiniteScroll=!1,1===this.pagina&&(this.emptySolicitud=!0),void(e&&e.target.complete());this.emisores=this.emisores.concat(t),this.pagina++,e&&e.target.complete()},i=>{console.error("Error al obtener las solicitudes:",i),e&&e.target.complete()})}cargarNuevos(e){this.infiniteScroll=!0,this.obtenerSolicitudes(e)}pull2refresh(e){window.location.reload()}aprobarSolicitud(e){this.alertaService.alertaDecision("\xbfDesea aceptar a este usuario?").then(i=>{this.aceptar=i.data,!0===this.aceptar?this.emisorService.aceptarSolicitud(e).subscribe(e=>{window.location.reload()},e=>{console.error("Error al aprobar la solicitud: ",e)}):this.alertaService.presentToast("Operaci\xf3n cancelada")})}rechazarSolicitud(e){this.alertaService.alertaDecision("\xbfDesea rechazar a este usuario?").then(i=>{this.aceptar=i.data,!0===this.aceptar?this.emisorService.rechazarSolicitud(e).subscribe(e=>{window.location.reload()},e=>{console.error("Error al rechazar la solicitud: ",e)}):this.alertaService.presentToast("Operaci\xf3n cancelada")})}}return e.\u0275fac=function(i){return new(i||e)(c.Y36(a.i),c.Y36(l.e))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-gest-cert"]],decls:25,vars:3,consts:[[1,"cabecera"],["slot","start"],["menu","first","color","light"],["color","light",1,"vecired"],["slot","end"],["disabled",""],[1,"ripple-parent"],[1,"emisorTitle","ion-text-center"],[4,"ngIf"],["slot","fixed",3,"ionRefresh"],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Cargando m\xe1s certificados."],["class","nomasSolicitudes",4,"ngIf"],[1,"ion-text-center","noEmit"],["src","/../../assets/noComunity.png",1,"noEmitImage"],[1,"noEmitTitle"],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12"],[1,"emisorUnitario"],[1,"fontColor","ion-text-center"],["name","body"],["name","document-text-outline"],[1,"ion-text-center"],["name","chatbubble-ellipses-outline"],["id","aceptarVe","color","success","size","small",1,"aceptarVecino",2,"width","84%",3,"click"],["color","danger","size","small",1,"rechazarVecino",3,"click"],[1,"nomasSolicitudes"]],template:function(e,i){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar",0),c.TgZ(2,"ion-buttons",1),c._UZ(3,"ion-menu-button",2),c.qZA(),c.TgZ(4,"ion-title",3),c._uU(5," VeciRed "),c.qZA(),c.TgZ(6,"ion-buttons",4),c.TgZ(7,"ion-button",5),c._UZ(8,"ion-icon"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"ion-content"),c.TgZ(10,"ion-grid"),c.TgZ(11,"div",6),c.TgZ(12,"ion-row"),c.TgZ(13,"ion-col",7),c.TgZ(14,"b"),c._uU(15,"SOLICITUDES DE CERTIFICADOS DE MI COMUNIDAD"),c.qZA(),c.qZA(),c.qZA(),c._UZ(16,"ion-ripple-effect"),c.qZA(),c.qZA(),c.YNc(17,d,6,0,"ion-grid",8),c.TgZ(18,"ion-refresher",9),c.NdJ("ionRefresh",function(e){return i.pull2refresh(e)}),c._UZ(19,"ion-refresher-content"),c.qZA(),c.TgZ(20,"ion-row"),c.YNc(21,u,22,4,"ion-col",10),c.qZA(),c.TgZ(22,"ion-infinite-scroll",11),c.NdJ("ionInfinite",function(e){return i.cargarNuevos(e)}),c._UZ(23,"ion-infinite-scroll-content",12),c.qZA(),c.YNc(24,g,3,0,"div",13),c.qZA()),2&e&&(c.xp6(17),c.Q6J("ngIf",i.emptySolicitud),c.xp6(4),c.Q6J("ngForOf",i.emisores),c.xp6(3),c.Q6J("ngIf",!i.infiniteScroll&&!i.emptySolicitud))},directives:[r.Gu,r.sr,r.Sm,r.fG,r.wd,r.YG,r.gu,r.W2,r.jY,r.Nd,r.wI,r.H$,o.O5,r.nJ,r.Wo,o.sg,r.ju,r.MB,r.PM,r.Zi,r.tO,r.gZ,r.FN],styles:[".cabecera[_ngcontent-%COMP%]{--background:linear-gradient(135deg,#110a3b,#2f32a0)}.noEmit[_ngcontent-%COMP%]{background-color:#afeeee;border:2px solid #241816;border-bottom-left-radius:9%;border-bottom-right-radius:9%;border-top-left-radius:9%;border-top-right-radius:9%;box-shadow:0 0 2em rgba(30,30,31,.932)}.noEmitTitle[_ngcontent-%COMP%]{color:#000;text-align:center;font-family:monospace}.noEmitImage[_ngcontent-%COMP%]{width:40%;height:50%;max-height:70%}.emisorUnitario[_ngcontent-%COMP%]{box-shadow:0 0 2em rgba(30,30,31,.932);background-color:#ecebeb}.emisorTitle[_ngcontent-%COMP%]{margin-top:-1vw;font-family:monospace;font-size:x-large}.nomasSolicitudes[_ngcontent-%COMP%]{text-align:center;padding:10px;color:#777}.vecired[_ngcontent-%COMP%]{color:#f0f8ff;font-weight:bolder;font-size:x-large;text-align:center}"]}),e})()}];let p=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[s.Bz.forChild(m)],s.Bz]}),e})();var h=t(5369);let Z=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.ez,n.u5,r.Pc,p,h.r]]}),e})()},5503:(e,i,t)=>{"use strict";t.d(i,{D:()=>n});var o=t(639);let n=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({}),e})()},2478:(e,i,t)=>{"use strict";t.d(i,{e:()=>s});var o=t(4762),n=t(639),r=t(7823);let s=(()=>{class e{constructor(e,i){this.alertController=e,this.toastController=i}alerta(e){return(0,o.mG)(this,void 0,void 0,function*(){const i=yield this.alertController.create({cssClass:"my-custom-class",message:e,buttons:[{text:"Ok",role:"cancel"}]});yield i.present(),yield i.onDidDismiss()})}alertaDecision(e){return(0,o.mG)(this,void 0,void 0,function*(){let i;const t=yield this.alertController.create({backdropDismiss:!1,message:e,buttons:[{text:"ACEPTAR",handler:()=>(t.dismiss(!0),!1)},{text:"Cancelar"}]});return yield t.present(),yield t.onDidDismiss().then(e=>{i=e}),i})}presentToast(e){return(0,o.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:e,position:"bottom",duration:1800})).present()})}}return e.\u0275fac=function(i){return new(i||e)(n.LFG(r.Br),n.LFG(r.yF))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);