(self.webpackChunkveciRed=self.webpackChunkveciRed||[]).push([[4210],{4210:(e,o,i)=>{"use strict";i.d(o,{g:()=>d});var t=i(639),n=i(6014),r=i(7860),c=i(7823),s=i(2478),a=i(665);let d=(()=>{class e{constructor(e,o,i,t){this.acuerdosService=e,this.router=o,this.navCtrl=i,this.alertasService=t,this.opciones=[],this.titulos="",this.opcion1={titulo:"",descripcion:"",votos:0},this.opcion2={titulo:"",descripcion:"",votos:0},this.opcion3={titulo:"",descripcion:"",votos:0},this.opcion4={titulo:"",descripcion:"",votos:0},this.ocultarOpcion3=!0,this.ocultarOpcion4=!0,this.contador=0,this.desactivarBotonAdd=!1,this.desactivarBotonRemove=!0}ngOnInit(){this.acuerdosService.Objeto.subscribe(e=>{1==e&&this.limpiar()})}agregarOpcion(){this.contador++,this.contador>0&&(this.ocultarOpcion3=!1,this.desactivarBotonRemove=!1),this.contador>1&&(this.ocultarOpcion4=!1,this.desactivarBotonAdd=!0)}eliminarOpcion(){this.contador--,this.contador<1&&(this.ocultarOpcion3=!0,this.desactivarBotonRemove=!0),this.contador<2&&(this.ocultarOpcion4=!0,this.desactivarBotonAdd=!1)}enviarOpciones(){null==this.validacion()&&(this.opciones.push(this.opcion1),this.opciones.push(this.opcion2),this.contador>=1&&this.opciones.push(this.opcion3),2==this.contador&&this.opciones.push(this.opcion4),this.acuerdosService.enviarDatos(this.opciones),this.router.navigate(["/main/tabs/crear-acuerdo"]),this.opciones=[])}validacion(){if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,30})+$/g.test(this.opcion1.titulo))return this.alertasService.alerta("Las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 30.");if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,250})+$/g.test(this.opcion1.descripcion))return this.alertasService.alerta("Las descripciones de las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 250.");if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,30})+$/g.test(this.opcion2.titulo))return this.alertasService.alerta("Las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 30.");if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,250})+$/g.test(this.opcion2.descripcion))return this.alertasService.alerta("Las descripciones de las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 250.");if(this.contador>=1){if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,30})+$/g.test(this.opcion3.titulo))return this.alertasService.alerta("Las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 30.");if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,250})+$/g.test(this.opcion3.descripcion))return this.alertasService.alerta("Las descripciones de las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 250.")}if(2==this.contador){if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,30})+$/g.test(this.opcion4.titulo))return this.alertasService.alerta("Las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 30.");if(0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd10-9\xa1!\xbf?\-.,()=/@ ]{3,250})+$/g.test(this.opcion4.descripcion))return this.alertasService.alerta("Las descripciones de las opciones del acuerdo no permiten tener los caracteres ingresados. Con un m\xednimo de 3 caracteres y un m\xe1ximo de 250.")}}limpiar(){this.opcion1.titulo="",this.opcion2.titulo="",this.opcion3.titulo="",this.opcion4.titulo="",this.opcion1.descripcion="",this.opcion2.descripcion="",this.opcion3.descripcion="",this.opcion4.descripcion=""}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(n.U),t.Y36(r.F0),t.Y36(c.SH),t.Y36(s.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-opciones"]],decls:82,vars:27,consts:[[1,"cabecera"],["slot","start"],["defaultHref","/main/tabs/crear-acuerdo","color","light"],["color","light",1,"vecired"],["slot","end"],["disabled",""],[1,"titulo"],[1,"ion-text-center"],["position","floating"],["type","text","minlength","3","maxlength","30","required","",3,"ngModel","ngModelChange"],[1,"caracteres"],["minlength","3","maxlength","250","required","",3,"ngModel","ngModelChange"],[3,"hidden"],[1,"caracteres",3,"hidden"],["offset","3"],[1,"botones",3,"click"],["shape","round",3,"disabled"],["name","add-circle-outline"],[1,"botones"],["shape","round",3,"disabled","click"],["name","remove-circle-outline"],["color","tertiary","shape","round","expand","full",1,"sendData",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5," VeciRed "),t.qZA(),t.TgZ(6,"ion-buttons",4),t.TgZ(7,"ion-button",5),t._UZ(8,"ion-icon"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"ion-content"),t.TgZ(10,"div",6),t.TgZ(11,"h4",7),t.TgZ(12,"b"),t._uU(13,"OPCIONES"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"ion-list"),t.TgZ(15,"ion-item"),t.TgZ(16,"ion-label",8),t.TgZ(17,"b"),t._uU(18,"Opci\xf3n 1:"),t.qZA(),t.qZA(),t.TgZ(19,"ion-input",9),t.NdJ("ngModelChange",function(e){return o.opcion1.titulo=e}),t.qZA(),t.qZA(),t.TgZ(20,"span",10),t._uU(21),t.qZA(),t.TgZ(22,"ion-item"),t.TgZ(23,"ion-label",8),t.TgZ(24,"b"),t._uU(25,"Descripci\xf3n:"),t.qZA(),t.qZA(),t.TgZ(26,"ion-textarea",11),t.NdJ("ngModelChange",function(e){return o.opcion1.descripcion=e}),t.qZA(),t.qZA(),t.TgZ(27,"span",10),t._uU(28),t.qZA(),t.TgZ(29,"ion-item"),t.TgZ(30,"ion-label",8),t.TgZ(31,"b"),t._uU(32,"Opci\xf3n 2:"),t.qZA(),t.qZA(),t.TgZ(33,"ion-input",9),t.NdJ("ngModelChange",function(e){return o.opcion2.titulo=e}),t.qZA(),t.qZA(),t.TgZ(34,"span",10),t._uU(35),t.qZA(),t.TgZ(36,"ion-item"),t.TgZ(37,"ion-label",8),t.TgZ(38,"b"),t._uU(39,"Descripci\xf3n:"),t.qZA(),t.qZA(),t.TgZ(40,"ion-textarea",11),t.NdJ("ngModelChange",function(e){return o.opcion2.descripcion=e}),t.qZA(),t.qZA(),t.TgZ(41,"span",10),t._uU(42),t.qZA(),t.TgZ(43,"ion-item",12),t.TgZ(44,"ion-label",8),t.TgZ(45,"b"),t._uU(46,"Opci\xf3n 3:"),t.qZA(),t.qZA(),t.TgZ(47,"ion-input",9),t.NdJ("ngModelChange",function(e){return o.opcion3.titulo=e}),t.qZA(),t.qZA(),t.TgZ(48,"span",13),t._uU(49),t.qZA(),t.TgZ(50,"ion-item",12),t.TgZ(51,"ion-label",8),t.TgZ(52,"b"),t._uU(53,"Descripci\xf3n:"),t.qZA(),t.qZA(),t.TgZ(54,"ion-textarea",11),t.NdJ("ngModelChange",function(e){return o.opcion3.descripcion=e}),t.qZA(),t.qZA(),t.TgZ(55,"span",13),t._uU(56),t.qZA(),t.TgZ(57,"ion-item",12),t.TgZ(58,"ion-label",8),t.TgZ(59,"b"),t._uU(60,"Opci\xf3n 4:"),t.qZA(),t.qZA(),t.TgZ(61,"ion-input",9),t.NdJ("ngModelChange",function(e){return o.opcion4.titulo=e}),t.qZA(),t.qZA(),t.TgZ(62,"span",13),t._uU(63),t.qZA(),t.TgZ(64,"ion-item",12),t.TgZ(65,"ion-label",8),t.TgZ(66,"b"),t._uU(67,"Descripci\xf3n:"),t.qZA(),t.qZA(),t.TgZ(68,"ion-textarea",11),t.NdJ("ngModelChange",function(e){return o.opcion4.descripcion=e}),t.qZA(),t.qZA(),t.TgZ(69,"span",13),t._uU(70),t.qZA(),t.TgZ(71,"ion-row"),t.TgZ(72,"ion-col",14),t.TgZ(73,"ion-buttons",15),t.NdJ("click",function(){return o.agregarOpcion()}),t.TgZ(74,"ion-button",16),t._UZ(75,"ion-icon",17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(76,"ion-col"),t.TgZ(77,"ion-buttons",18),t.TgZ(78,"ion-button",19),t.NdJ("click",function(){return o.eliminarOpcion()}),t._UZ(79,"ion-icon",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(80,"ion-button",21),t.NdJ("click",function(){return o.enviarOpciones()}),t._uU(81," Enviar "),t.qZA(),t.qZA()),2&e&&(t.xp6(19),t.Q6J("ngModel",o.opcion1.titulo),t.xp6(2),t.hij("",30-o.opcion1.titulo.length," caracteres restantes"),t.xp6(5),t.Q6J("ngModel",o.opcion1.descripcion),t.xp6(2),t.hij("",250-o.opcion1.descripcion.length," caracteres restantes"),t.xp6(5),t.Q6J("ngModel",o.opcion2.titulo),t.xp6(2),t.hij("",30-o.opcion2.titulo.length," caracteres restantes"),t.xp6(5),t.Q6J("ngModel",o.opcion2.descripcion),t.xp6(2),t.hij("",250-o.opcion2.descripcion.length," caracteres restantes"),t.xp6(1),t.Q6J("hidden",o.ocultarOpcion3),t.xp6(4),t.Q6J("ngModel",o.opcion3.titulo),t.xp6(1),t.Q6J("hidden",o.ocultarOpcion3),t.xp6(1),t.hij("",30-o.opcion3.titulo.length," caracteres restantes"),t.xp6(1),t.Q6J("hidden",o.ocultarOpcion3),t.xp6(4),t.Q6J("ngModel",o.opcion3.descripcion),t.xp6(1),t.Q6J("hidden",o.ocultarOpcion3),t.xp6(1),t.hij("",250-o.opcion3.descripcion.length," caracteres restantes"),t.xp6(1),t.Q6J("hidden",o.ocultarOpcion4),t.xp6(4),t.Q6J("ngModel",o.opcion4.titulo),t.xp6(1),t.Q6J("hidden",o.ocultarOpcion4),t.xp6(1),t.hij("",30-o.opcion4.titulo.length," caracteres restantes"),t.xp6(1),t.Q6J("hidden",o.ocultarOpcion4),t.xp6(4),t.Q6J("ngModel",o.opcion4.descripcion),t.xp6(1),t.Q6J("hidden",o.ocultarOpcion4),t.xp6(1),t.hij("",250-o.opcion4.descripcion.length," caracteres restantes"),t.xp6(4),t.Q6J("disabled",o.desactivarBotonAdd),t.xp6(4),t.Q6J("disabled",o.desactivarBotonRemove),t.xp6(2),t.Q6J("disabled",o.opcion1.titulo.length<3||o.opcion1.descripcion.length<3||o.opcion2.titulo.length<3||o.opcion2.descripcion.length<3||o.opcion3.titulo.length<3&&o.contador>0||o.opcion3.descripcion.length<3&&o.contador>0||o.opcion4.titulo.length<3&&o.contador>1||o.opcion4.descripcion.length<3&&o.contador>1))},directives:[c.Gu,c.sr,c.Sm,c.oU,c.cs,c.wd,c.YG,c.gu,c.W2,c.q_,c.Ie,c.Q$,c.pK,c.j9,a.wO,a.nD,a.Q7,a.JJ,a.On,c.g2,c.Nd,c.wI],styles:[".titulo[_ngcontent-%COMP%]{margin-top:-3%;font-family:monospace}.caracteres[_ngcontent-%COMP%]{font-size:small;margin-left:55%;color:grey}.cabecera[_ngcontent-%COMP%]{--background:linear-gradient(135deg,#110a3b,#2f32a0)}.vecired[_ngcontent-%COMP%]{color:#f0f8ff;font-weight:bolder;font-size:x-large;text-align:center}"]}),e})()},6014:(e,o,i)=>{"use strict";i.d(o,{U:()=>l});var t=i(1841),n=i(639),r=i(2340),c=i(1929),s=i(4975),a=i(7905);const d=r.N.url;let l=(()=>{class e{constructor(e,o,i){this.http=e,this.usuarioService=o,this.fileTransfer=i,this.pagiaAcuerdos=0,this.Objeto=new c.t,this.nuevoAcuerdo=new n.vpe,this.acuerdoEliminado=new n.vpe}getAcuerdos(e=!1){e&&(this.pagiaAcuerdos=0);const o=new t.WM({UToken:this.usuarioService.userToken});return this.pagiaAcuerdos++,this.http.get(`${d}/acuerdos/?pagina=${this.pagiaAcuerdos}`,{headers:o})}crearAcuerdo(e){const o=new t.WM({UToken:this.usuarioService.userToken});return new Promise(i=>{this.http.post(`${d}/acuerdos`,e,{headers:o}).subscribe(e=>{this.nuevoAcuerdo.emit(e.acuerdo),i(!0)})})}enviarDatos(e,o){e.tipo=o,this.Objeto.next(e)}limpiar(e){this.Objeto.next(e)}actualizarAcuerdo(e){const o=new t.WM({UToken:this.usuarioService.userToken});return new Promise(i=>{this.http.post(`${d}/acuerdos/actualizar`,e,{headers:o}).subscribe(e=>{i(!!e.ok)})})}eliminarAcuerdo(e){const o=new t.WM({UToken:this.usuarioService.userToken});return new Promise(i=>{this.http.post(`${d}/acuerdos/actualizar`,e,{headers:o}).subscribe(e=>{e.ok?(this.acuerdoEliminado.emit(e.acuerdo),i(!0)):i(!1)})})}subirImagen(e){const o={fileKey:"imagenAcuerdo",headers:{UToken:this.usuarioService.userToken}};this.fileTransfer.create().upload(e,`${d}/acuerdos/upload`,o).then(e=>{console.log(e)}).catch(e=>{console.log("Fallo al subir imagen:",e)})}}return e.\u0275fac=function(o){return new(o||e)(n.LFG(t.eN),n.LFG(s.i),n.LFG(a.K))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2478:(e,o,i)=>{"use strict";i.d(o,{e:()=>c});var t=i(4762),n=i(639),r=i(7823);let c=(()=>{class e{constructor(e,o){this.alertController=e,this.toastController=o}alerta(e){return(0,t.mG)(this,void 0,void 0,function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",message:e,buttons:[{text:"Ok",role:"cancel"}]});yield o.present(),yield o.onDidDismiss()})}alertaDecision(e){return(0,t.mG)(this,void 0,void 0,function*(){let o;const i=yield this.alertController.create({backdropDismiss:!1,message:e,buttons:[{text:"ACEPTAR",handler:()=>(i.dismiss(!0),!1)},{text:"Cancelar"}]});return yield i.present(),yield i.onDidDismiss().then(e=>{o=e}),o})}presentToast(e){return(0,t.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:e,position:"bottom",duration:1800})).present()})}}return e.\u0275fac=function(o){return new(o||e)(n.LFG(r.Br),n.LFG(r.yF))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);