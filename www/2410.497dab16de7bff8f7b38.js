(self.webpackChunkveciRed=self.webpackChunkveciRed||[]).push([[2410],{5369:(e,t,r)=>{"use strict";r.d(t,{r:()=>c});var i=r(8583),o=r(7823),n=r(5503),a=r(665),s=r(639);let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.ez,o.Pc,n.D,a.u5]]}),e})()},2410:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SolicitarCertPageModule:()=>v});var i=r(8583),o=r(665),n=r(7823),a=r(7860),s=r(4762),c=r(5873),l=r(639),u=r(2977),d=r(2478),m=r(9272),g=r(4975);const h=[{path:"",component:(()=>{class e{constructor(e,t,r,i,o){this.emisorService=e,this.ruta=t,this.alertaService=r,this.rutService=i,this.usuarioService=o,this.emisor={rut:"",motivo:"",certificado:{}},this.usuario={}}ngOnInit(){this.obtenerCertificado(),this.obtener()}obtener(){this.usuario=this.usuarioService.obtenerUsuario()}obtenerCertificado(){this.emisorService.Objeto.subscribe(e=>{this.emisor={rut:"",motivo:""},this.emisor.certificado=e})}crearCert(){return(0,s.mG)(this,void 0,void 0,function*(){null==this.validacion()&&(yield this.emisorService.crearSolicitud(this.emisor),this.emisor={rut:"",motivo:"",certificado:{}},this.ruta.navigateByUrl("main/tabs/tab1"),this.alertaService.presentToast("Certificado creado exitosamente"))})}validacion(){return 0==/(^[A-Za-z\xc1\xc9\xcd\xd3\xda\xe1\xe9\xed\xf3\xfa\xf1\xd1 ]{1,250})+$/g.test(this.emisor.motivo)?this.alertaService.alerta("El motivo no permite tener caracteres especiales"):(0,c.validate)(this.emisor.rut)?this.emisor.rut!==this.usuario.rut?this.alertaService.alerta("El RUT ingresado no corresponde con el usuario"):null:this.alertaService.alerta("el RUT ingresado no es valido")}formatearRut(e){return this.rutService.formatearRut(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(u.i),l.Y36(a.F0),l.Y36(d.e),l.Y36(m.o),l.Y36(g.i))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-solicitar-cert"]],decls:30,vars:4,consts:[[1,"cabecera"],["slot","start"],["defaultHref","/main/tabs/mis-certificados","color","light"],["color","light",1,"vecired"],["padding",""],[1,"ripple-parent"],[1,"avisosTitlte","ion-text-center"],["color","none"],["position","floating","color","light",1,"my-label"],["name","key","item-start",""],["name","rut","type","text","placeholder","12.345.678-9","color","light","required","",1,"my-label",3,"ngModel","ngModelChange","ionChange"],["name","motivo","type","text","placeholder","Inserte la raz\xf3n para la que necesita el certificado aqui.","color","light","required","",1,"my-label",3,"ngModel","ngModelChange"],[1,"caracteres"],["color","tertiary","shape","round","expand","full",1,"crearCert",2,"margin-top","30%",3,"disabled","click"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button",2),l.qZA(),l.TgZ(4,"ion-title",3),l._uU(5,"VeciRed"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"ion-content",4),l.TgZ(7,"ion-grid"),l.TgZ(8,"div",5),l.TgZ(9,"ion-row"),l.TgZ(10,"ion-col",6),l.TgZ(11,"b"),l._uU(12,"EMISOR DE CERTIFICADOS"),l.qZA(),l.qZA(),l.qZA(),l._UZ(13,"ion-ripple-effect"),l.qZA(),l.qZA(),l.TgZ(14,"ion-grid"),l.TgZ(15,"ion-list"),l.TgZ(16,"ion-item",7),l.TgZ(17,"ion-label",8),l._UZ(18,"ion-icon",9),l._uU(19," RUT "),l.qZA(),l.TgZ(20,"ion-input",10),l.NdJ("ngModelChange",function(e){return t.emisor.rut=e})("ionChange",function(){return t.emisor.rut=t.formatearRut(t.emisor.rut)}),l.qZA(),l.qZA(),l.TgZ(21,"ion-item",7),l.TgZ(22,"ion-label",8),l._UZ(23,"ion-icon",9),l._uU(24," Motivo de emision de certificado "),l.qZA(),l.TgZ(25,"ion-textarea",11),l.NdJ("ngModelChange",function(e){return t.emisor.motivo=e}),l.qZA(),l.qZA(),l.TgZ(26,"span",12),l._uU(27),l.qZA(),l.TgZ(28,"ion-button",13),l.NdJ("click",function(){return t.crearCert()}),l._uU(29," Pedir Certificado "),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(20),l.Q6J("ngModel",t.emisor.rut),l.xp6(5),l.Q6J("ngModel",t.emisor.motivo),l.xp6(2),l.hij("",250-t.emisor.motivo.length," caracteres restantes"),l.xp6(1),l.Q6J("disabled",t.emisor.motivo.length<=10||t.emisor.rut.length<1))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,n.W2,n.jY,n.Nd,n.wI,n.H$,n.q_,n.Ie,n.Q$,n.gu,n.pK,n.j9,o.Q7,o.JJ,o.On,n.g2,n.YG],styles:[".caracteres[_ngcontent-%COMP%]{color:#fff}.my-label[_ngcontent-%COMP%]{font-size:18px;color:#1b1c1d}.vecired[_ngcontent-%COMP%]{color:#f0f8ff;font-weight:bolder;font-size:x-large;text-align:center}.cabecera[_ngcontent-%COMP%]{--background:linear-gradient(135deg,#110a3b,#2f32a0)}.caracteres[_ngcontent-%COMP%]{font-size:small;margin-left:55%;color:#070707}"]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.Bz.forChild(h)],a.Bz]}),e})();var p=r(5369);let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,o.u5,n.Pc,f,p.r]]}),e})()},5503:(e,t,r)=>{"use strict";r.d(t,{D:()=>o});var i=r(639);let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})()},2478:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var i=r(4762),o=r(639),n=r(7823);let a=(()=>{class e{constructor(e,t){this.alertController=e,this.toastController=t}alerta(e){return(0,i.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",message:e,buttons:[{text:"Ok",role:"cancel"}]});yield t.present(),yield t.onDidDismiss()})}alertaDecision(e){return(0,i.mG)(this,void 0,void 0,function*(){let t;const r=yield this.alertController.create({backdropDismiss:!1,message:e,buttons:[{text:"ACEPTAR",handler:()=>(r.dismiss(!0),!1)},{text:"Cancelar"}]});return yield r.present(),yield r.onDidDismiss().then(e=>{t=e}),t})}presentToast(e){return(0,i.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:e,position:"bottom",duration:1800})).present()})}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(n.Br),o.LFG(n.yF))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);