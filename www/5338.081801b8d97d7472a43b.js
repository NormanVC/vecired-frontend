(self.webpackChunkveciRed=self.webpackChunkveciRed||[]).push([[5338],{5338:(o,i,e)=>{"use strict";e.r(i),e.d(i,{GestionarPageModule:()=>p});var t=e(8583),n=e(665),r=e(7823),s=e(7860),a=e(4762),c=e(639),l=e(4975),u=e(2478);function d(o,i){if(1&o){const o=c.EpF();c.TgZ(0,"ion-col",19),c.TgZ(1,"ion-select",20),c.NdJ("ionChange",function(i){c.CHM(o);const e=c.oxw(),t=e.index,n=e.$implicit;return c.oxw().onSelectedChange(i,t,n.rol)}),c.TgZ(2,"ion-select-option",21),c._uU(3,"Directiva"),c.qZA(),c.TgZ(4,"ion-select-option",21),c._uU(5,"Miembro"),c.qZA(),c.qZA(),c.qZA()}2&o&&(c.xp6(2),c.Q6J("value",1),c.xp6(2),c.Q6J("value",2))}function g(o,i){if(1&o){const o=c.EpF();c.TgZ(0,"ion-col",19),c.TgZ(1,"ion-select",22),c.NdJ("ionChange",function(i){c.CHM(o);const e=c.oxw(),t=e.index,n=e.$implicit;return c.oxw().onSelectedChange(i,t,n.rol)}),c.TgZ(2,"ion-select-option",21),c._uU(3,"Directiva"),c.qZA(),c.TgZ(4,"ion-select-option",21),c._uU(5,"Miembro"),c.qZA(),c.qZA(),c.qZA()}2&o&&(c.xp6(2),c.Q6J("value",1),c.xp6(2),c.Q6J("value",2))}function Z(o,i){if(1&o){const o=c.EpF();c.TgZ(0,"ion-col",9),c.TgZ(1,"ion-card",10),c.TgZ(2,"ion-card-header"),c.TgZ(3,"ion-card-subtitle",11),c._uU(4),c.qZA(),c.TgZ(5,"ion-card-title",11),c._UZ(6,"ion-icon",12),c.TgZ(7,"b"),c._uU(8),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"ion-card-content",11),c.TgZ(10,"ion-col"),c.TgZ(11,"ion-label"),c.TgZ(12,"b"),c._uU(13,"Asignaci\xf3n:"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"ion-row"),c.YNc(15,d,6,2,"ion-col",13),c.YNc(16,g,6,2,"ion-col",13),c.TgZ(17,"ion-col",14),c.TgZ(18,"ion-buttons",15),c.TgZ(19,"ion-button",16),c.NdJ("click",function(){const i=c.CHM(o).$implicit;return c.oxw().actualizarRol(i)}),c._UZ(20,"ion-icon",17),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"ion-row"),c.TgZ(22,"ion-col"),c._UZ(23,"ion-icon",18),c.TgZ(24,"b"),c._uU(25),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"ion-row"),c.TgZ(27,"ion-col"),c._uU(28),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&o){const o=i.$implicit,e=i.index,t=c.oxw();c.xp6(4),c.hij(" ",t.mainCom.nombreComunidad," "),c.xp6(4),c.Oqu(o.nombre),c.xp6(7),c.Q6J("ngIf",o.rol==t.rolCheck[0]),c.xp6(1),c.Q6J("ngIf",o.rol!=t.rolCheck[0]),c.xp6(3),c.Q6J("disabled",t.position!=e),c.xp6(6),c.Oqu(t.mainCom.region),c.xp6(3),c.hij(" ",t.mainCom.comuna," ")}}const m=[{path:"",component:(()=>{class o{constructor(o,i){this.usuarioService=o,this.alertasService=i,this.usuarios=[],this.mainCom={},this.rolCheck=[],this.changeRol=!1,this.dataUsuario={idUsuario:"",idComunidad:"",rol:Number}}ngOnInit(){this.rolCheck[0]=1}ionViewWillEnter(){this.obtenerMiembros()}obtenerMiembros(){return(0,a.mG)(this,void 0,void 0,function*(){(yield this.usuarioService.obtenerMiembrosComunidad()).subscribe(o=>{this.usuarios=o.miembros,this.mainCom=o.comBD;let i=[],e=[];for(let t of this.usuarios)i=t.comunidad,e=t.rol,e=e[i.indexOf(this.mainCom._id)],t.rol=e})})}actualizarRol(o){return(0,a.mG)(this,void 0,void 0,function*(){this.dataUsuario.idUsuario=o._id,this.dataUsuario.idComunidad=this.mainCom._id,(yield this.usuarioService.actualizarRolUsuario(this.dataUsuario))&&(this.alertasService.presentToast("Modificaci\xf3n exitosa"),this.usuarios=[],this.mainCom={},this.changeRol=!1,this.dataUsuario={idUsuario:"",idComunidad:"",rol:Number},this.position=null,this.ionViewWillEnter())})}onSelectedChange(o,i,e){e!=o.target.value?(this.dataUsuario.rol=o.target.value,this.position=i):this.position=null}}return o.\u0275fac=function(i){return new(i||o)(c.Y36(l.i),c.Y36(u.e))},o.\u0275cmp=c.Xpm({type:o,selectors:[["app-gestionar"]],decls:19,vars:1,consts:[[1,"cabecera"],["slot","start"],["defaultHref","/main/tabs/tab1","color","light"],["color","light",1,"vecired"],["slot","end"],["disabled",""],[1,"ripple-parent"],[1,"avisosTitlte","ion-text-center"],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12",4,"ngFor","ngForOf"],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12"],[1,"avisoUnitario"],[1,"fontColor","ion-text-center"],["name","body"],["style","margin-top:-3%;margin-left: 20%;",4,"ngIf"],[2,"margin-left","1%","margin-top","-3%"],[1,"ion-text-center"],[1,"actualizarRol",3,"disabled","click"],["slot","icon-only","name","checkbox-sharp",2,"color","green"],["name","location-sharp",2,"margin-bottom","-0.7vw"],[2,"margin-top","-3%","margin-left","20%"],["placeholder","Directiva",3,"ionChange"],[3,"value"],["placeholder","Miembro",1,"selectChange",3,"ionChange"]],template:function(o,i){1&o&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar",0),c.TgZ(2,"ion-buttons",1),c._UZ(3,"ion-back-button",2),c.qZA(),c.TgZ(4,"ion-title",3),c._uU(5,"VeciRed"),c.qZA(),c.TgZ(6,"ion-buttons",4),c.TgZ(7,"ion-button",5),c._UZ(8,"ion-icon"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"ion-content"),c.TgZ(10,"ion-grid"),c.TgZ(11,"div",6),c.TgZ(12,"ion-row"),c.TgZ(13,"ion-col",7),c.TgZ(14,"b"),c._uU(15,"MIEMBROS DE LA COMUNIDAD"),c.qZA(),c.qZA(),c.qZA(),c._UZ(16,"ion-ripple-effect"),c.qZA(),c.qZA(),c.TgZ(17,"ion-row"),c.YNc(18,Z,29,7,"ion-col",8),c.qZA(),c.qZA()),2&o&&(c.xp6(18),c.Q6J("ngForOf",i.usuarios))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.YG,r.gu,r.W2,r.jY,r.Nd,r.wI,r.H$,t.sg,r.PM,r.Zi,r.tO,r.gZ,r.FN,r.Q$,t.O5,r.t9,r.QI,r.n0],styles:[".avisosTitlte[_ngcontent-%COMP%]{margin-top:-1vw;font-family:monospace;font-size:x-large}.avisoUnitario[_ngcontent-%COMP%]{box-shadow:0 0 2em rgba(30,30,31,.932);background-color:#afeeee}.fontColor[_ngcontent-%COMP%]{color:#000}ion-select[_ngcontent-%COMP%]{color:#1e2030;--placeholder-color:#050505;--placeholder-opacity:1;font-size:large}.cabecera[_ngcontent-%COMP%]{--background:linear-gradient(135deg,#110a3b,#2f32a0)}.vecired[_ngcontent-%COMP%]{color:#f0f8ff;font-weight:bolder;font-size:x-large;text-align:center}"]}),o})()}];let h=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[[s.Bz.forChild(m)],s.Bz]}),o})(),p=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[[t.ez,n.u5,r.Pc,h]]}),o})()},2478:(o,i,e)=>{"use strict";e.d(i,{e:()=>s});var t=e(4762),n=e(639),r=e(7823);let s=(()=>{class o{constructor(o,i){this.alertController=o,this.toastController=i}alerta(o){return(0,t.mG)(this,void 0,void 0,function*(){const i=yield this.alertController.create({cssClass:"my-custom-class",message:o,buttons:[{text:"Ok",role:"cancel"}]});yield i.present(),yield i.onDidDismiss()})}alertaDecision(o){return(0,t.mG)(this,void 0,void 0,function*(){let i;const e=yield this.alertController.create({backdropDismiss:!1,message:o,buttons:[{text:"ACEPTAR",handler:()=>(e.dismiss(!0),!1)},{text:"Cancelar"}]});return yield e.present(),yield e.onDidDismiss().then(o=>{i=o}),i})}presentToast(o){return(0,t.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:o,position:"bottom",duration:1800})).present()})}}return o.\u0275fac=function(i){return new(i||o)(n.LFG(r.Br),n.LFG(r.yF))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);